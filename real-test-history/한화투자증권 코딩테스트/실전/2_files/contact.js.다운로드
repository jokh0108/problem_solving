var contact = {
	init: function(userData, config) {
		if (!window.Intercom) {
			return;
		}

		var intercomSettings = {
			app_id: config.intercomAppId
		};

		if (userData) {
			if (userData.id && userData.hashedId) {
				intercomSettings.user_id = userData.id;
				intercomSettings.user_hash = userData.hashedId;
			}

			if (userData.email) {
				intercomSettings.email = userData.email;
			}

			if (userData.name) {
				intercomSettings.name = userData.name;
			}

			if (userData.signup_date) {
				intercomSettings.created_at = userData.signup_date;
			}

			if (userData.test_role) {
				intercomSettings.test_role = userData.test_role;
			}
		}

		window.Intercom('shutdown');
		window.Intercom('boot', intercomSettings);
	}
};

if (typeof define === 'undefined') {
	window.contact = contact;
} else {
	define(function() {
		var widgets = {};

		widgets.contact = contact;

		return widgets.contact;
	});
}